var geometry = ee.Geometry.Point([36.8219, -1.2921]);  // Nairobi, Kenya
var col = ee.ImageCollection('GOOGLE/Research/open-buildings-temporal/v1');

/**
 * Adds building presence and height layers for a given timestamp.
 * @param {number} millis Timestamp in milliseconds.
 */
function addLayers(millis) {
  // Create a mosaic of tiles with the same timestamp.
  var mosaic = col.filter(ee.Filter.eq('system:time_start', millis)).mosaic();
  var year = new Date(millis).getFullYear();
  
  // Add building presence layer with a color palette
  Map.addLayer(
      mosaic.select('building_presence'), 
      {min: 0, max: 1, palette: ['black', 'yellow', 'red']},
      'building_presence_' + year);
  
  // Add building height layer with a color palette
  Map.addLayer(
      mosaic.select('building_height'), 
      {min: 0, max: 100, palette: ['blue', 'green', 'yellow', 'orange', 'red']},
      'building_height_' + year,
      false);  // Set to true if you want this layer visible by default
}

// Get latest 2 years
var ts = col.filterBounds(geometry)
             .aggregate_array('system:time_start')
             .distinct()
             .sort()
             .getInfo()
             .slice(-2);

print('Available timestamps for Nairobi:', ts);

ts.forEach(addLayers);

Map.centerObject(geometry, 14);

print('Script execution completed.');
